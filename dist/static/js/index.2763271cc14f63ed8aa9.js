webpackJsonp([4],{2:function(n,a,e){"use strict";(function(n){e(4);var a=e(1),i=function(n){return n&&n.__esModule?n:{default:n}}(a);ajax("checksession","https://nx.smsc.net.cn/wxopen/app/shop/checksession.php/").then(function(n){console.log("登录成功状态！")}),n(document).ready(function(){function a(){console.log("退出");var n=function(){ajax("loginout","https://nx.smsc.net.cn/wxopen/app/shop/logout.php/").then(function(n){console.log("退出登录成功！",n)})};return i.default.myLayerTips("是否退出？",n,"取消","确定")}n("#loginout").on("click",a)})}).call(a,e(0))},3:function(n,a){},30:function(n,a,e){"use strict";(function(n){e(2);var a=e(1),i=function(n){return n&&n.__esModule?n:{default:n}}(a);e(3),n(document).ready(function(){function a(){ajax(Api("getCompanyInfo")).then(function(a){var e="";if(n("#header-info img").attr("src",a.data.headimg),n("#header-info .suerName").text(a.data.nickname),a){var t=a.data;e='<li class="list-group-item"><span>公司简称：</span><em>'+t.name+'</em></li><li class="list-group-item"><span>公司主体：</span><em>'+t.ownerid+"</em></li>";for(var o="",s=0;s<t.mp.minipro.length;s++){var l=t.mp.minipro[s],c=l.name?"i-selected":"";o+='\n                    <li class="list-group-item clearfix">\n                        <span class="fl"> '+l.vname+'：</span>\n                        <div class="fl minipro-list tc">\n                            <i class="iconfont icon-xiaochengxu '+c+'"></i> \n                            '+l.name+" \n                        </div>\n                    ","i-selected"!==c&&(o+='<div class="fr">\n                                <button id="bind-minipro" data-order="'+l.url+'" type="button" class="btn btn-primary" >绑定小程序</button>\n                            </div>'),o+="</li>"}e+=o;for(var r="",m=0;m<t.mp.fwh.length;m++){var d=t.mp.fwh[m],p=d.name?"i-selected":"";r+='\n                    <li class="list-group-item clearfix">\n                        <span class="fl"> '+d.vname+'：</span>\n                        <div class="fl minipro-list tc">\n                            <i class="iconfont icon-wechat '+p+'"></i> \n                            '+d.name+" \n                        </div>","i-selected"!==p&&(r+='<div class="fr">\n                                 <button id="bind-minipro" data-order="'+d.url+'" type="button" class="btn btn-primary" data-toggle="modal">绑定服务号</button>\n                            </div>'),r+="</li>"}e+=r,e+='\n                <li class="list-group-item">\n                    <span>加入时间：</span>\n                    <em>'+t.intime+'</em>\n                </li>\n                <li class="list-group-item">\n                    <span>更新时间：</span>\n                    <em>'+t.uptime+'</em>\n                </li>\n                <li class="list-group-item">\n                    <span>联系方式：</span>\n                    <em>'+t.contact+"</em>\n                </li>\n            "}else e="<p>暂无数据！</p>";i.default.addHtml(n(".list-company"),e)})}window.addEventListener("message",function(e){if(console.log("from iframe....",e),e.data)try{var t=JSON.parse(e.data);console.log(t),200===t.code?(i.default.myLayer("绑定成功！",1),n("#myModal-company").modal("hide"),a()):i.default.myLayer("绑定失败,请重试！",2,3e3)}catch(n){i.default.myLayer("未知错误！",2)}},!1);var e=n(".company");a();var t=Object.assign({name:{message:"公司名称不能为空",validators:{notEmpty:{message:"公司名称不能为空"},stringLength:{min:2,max:30,message:"公司名称长度不能小于2位或超过30位"},regexp:{regexp:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"公司名称只能由字母、数字、点和下划线组成。"}}},contact:{validators:{notEmpty:{message:"手机号码不能为空！"},regexp:{regexp:/^1\d{10}$/,message:"手机号码格式不正确。"}}}},{}),o=Object.assign(Object.assign({},i.default.validatorOptions),{fields:t});i.default.toggle(n("#edit"),n(".list-company"),n(".form-company"),o),e.on("click","#bind-minipro",function(a){var e=n(a.target).attr("data-order");ajax(null,e).then(function(a){if(a.data){n("#myModal-company").modal("show");var e='\n                    <div class="modal-body">\n                        <div style="width:700px; height:549px;margin:0 auto;position:relative">\n                            <div class="shade-top"></div>\n                            <iframe id="wxcode" src="'+a.data+'" frameborder="0" scrolling="no"  width="100%" height="100%;"></iframe>\n                            <div class="shade-bottom"></div>\n                        </div>\n                        \n                    </div>\n                ';n("#myModal-company-inner").empty(),n("#myModal-company-inner").append(e)}})}),n("#myModal-company").on("hidden.bs.modal",function(a){n("#myModal-company-inner").empty(),n("#myModal-company-inner").unbind("click")}),n("#company-submit").click(function(){var e=n(".form-company");if(e.bootstrapValidator("validate"),e.data("bootstrapValidator").isValid()){var i=e.serializeArray(),t={};i.forEach(function(n){t[n.name]=n.value}),ajax(Api("updateCompanyInfo",t)).then(function(i){e[0].reset(),a(),n("#edit").trigger("click"),n(".list-company").show(),e.hide()})}})})}).call(a,e(0))}},[30]);