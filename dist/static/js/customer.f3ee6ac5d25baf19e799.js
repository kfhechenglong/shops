webpackJsonp([6],{2:function(t,e,n){"use strict";(function(t){n(5);var e=n(1),o=function(t){return t&&t.__esModule?t:{default:t}}(e);n(3),ajax("checksession","https://nx.smsc.net.cn/wxopen/app/shop/checksession.php/").then(function(t){console.log("登录成功状态！")}),t(document).ready(function(){function e(){console.log("退出");var t=function(){ajax("loginout","https://nx.smsc.net.cn/wxopen/app/shop/logout.php/").then(function(t){console.log("退出登录成功！",t)})};return o.default.myLayerTips("是否退出？",t,"取消","确定")}t("#loginout").on("click",e)})}).call(e,n(0))},3:function(t,e,n){"use strict";(function(t){ajax(Api("getCompanyInfo")).then(function(e){t("#header-info img").attr("src",e.data.headimg),t("#header-info .suerName").text(e.data.nickname)})}).call(e,n(0))},33:function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();n(2);var a=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(a);n(4),t(document).ready(function(){var n=t(".customer"),a=function(){function n(t,o,a,i){e(this,n),this.form=t,this.table=o,this.off=a,this.add=i,this.customerIsEdit=!1}return o(n,[{key:"showOrder",value:function(){t(".off-customer").trigger("click")}}]),n}();a.prototype.getCustomerList_fn=function(){var e=this,o=(layer.load(2),this);this.add.on("click",function(){o.addNewCustomer(),o.validator()}),t(".customer-btn-add").on("click",function(){o.addNewCustomerBtn()}),this.off.on("click",function(){o.offNewCustomer(),o.clearValidator()}),ajax(Api("getCustomerList")).then(function(t){if(t.data){var a=t.data,r=a.length;e.customerList=a;var s="";if(r>0){s+="<thead>< tr > <th>客户姓名</th> <th>微信</th> <th>微信电话</th><th>联系方式</th><th>绑定电话</th><th>二维码</th>  <th>操作</th> </tr > </thead ><tbody>";for(var d=0;d<r;d++){var c=a[d];s+="\n                        <tr>\n                            <td>"+c.name+"</td>\n                            <td>"+c.wxuid+"</td>\n                            <td>"+c.wxphone+"</td>\n                            <td>"+c.contact+"</td>\n                            <td>"+c.bind_phone+'</td>\n                            <td> \n                                <button data-qrcode="'+c.qrcode+'" class="btn btn-info" id="customer-show-code-btn">二维码</button>\n                                <button data-id="'+c.id+'" class="btn btn-danger" id="customer-show-clear-btn">清除</button>\n                            </td>\n                            <td> \n                                <input type="hidden" value="'+c.id+'">\n                                <button class="btn btn-warning" id="customer-edit-btn">编辑</button>\n                            </td>\n                        </tr>\n                        '}s+="</tbody>"}else s="<p>暂无数据！</p>";i.default.addHtml(e.table,s),n.on("click","#customer-delet-btn",function(){deletList("deletStore",o.getCustomerList_fn)}),n.on("click","#customer-edit-btn",function(){o.editCustomer(this),o.validator()}),n.on("click","#customer-show-code-btn",function(){o.showCode(this)}),n.on("click","#customer-show-clear-btn",function(){o.clearCode(this)})}}).then(function(){setTimeout(function(){layer.close(layer.index)},0)})},a.prototype.clearCode=function(e){ajax(Api("clearCode",{customerid:t(e).attr("data-id")})).then(function(t){i.default.myLayer("清除成功！",1)})},a.prototype.showCode=function(e){var n=t(e).attr("data-qrcode");t("#myModal-company").modal("show");var o='\n                <div class="modal-body">\n                    <div style="width:450px; height:450px;margin:0 auto;">\n                        <iframe id="wxcode" src="'+n+'" frameborder="0" scrolling="no"  width="100%" height="100%;"></iframe>\n                    </div>\n                    \n                </div>\n            ';t("#myModal-company-inner").empty(),t("#myModal-company-inner").append(o)},a.prototype.addNewCustomer=function(){this.add.hide(),this.off.show(),this.table.hide(),this.form.show()},a.prototype.editCustomer=function(e){this.customerIsEdit=!0,this.add.trigger("click");for(var n=t(e).parent().children("input").val(),o={},a=0;a<this.customerList.length;a++){var i=this.customerList[a];if(n==i.id){o=Object.assign({},i);break}}var r=this.form;r.find('input[name="id"]').val(n),r.find('input[name="name"]').val(o.name),r.find('input[name="contact"]').val(o.contact),r.find('input[name="bind_phone"]').val(o.bind_phone)},a.prototype.validator=function(){var t=Object.assign(Object.assign({},i.default.validatorOptions),{fields:{name:{validators:{notEmpty:{message:"客户名不能为空"},stringLength:{min:2,max:30,message:"客户名长度不能小于2位或超过30位"},regexp:{regexp:/^[A-Za-z\u4e00-\u9fa5]+$/,message:"客户名只能由字母、汉字组成。"}}},pass:{validators:{notEmpty:{message:"密码不能为空！"},stringLength:{min:6,max:30,message:"密码长度不能小于6位或超过30位"},regexp:{regexp:/^[a-zA-Z0-9_\.]+$/,message:"密码只能由字母、数字和下划线。"}}},contact:{validators:{notEmpty:{message:"联系方式不能为空！"},regexp:{regexp:/^[0-9]+$/,message:"只能是数字！"}}},bind_phone:{validators:{notEmpty:{message:"手机号不能为空！"},regexp:{regexp:/^1[3|5|6|7|8|9]\d{9}$/,message:"手机号格式不正确！"}}}}});this.form.bootstrapValidator(t)},a.prototype.clearValidator=function(){this.form.data("bootstrapValidator").destroy(),this.form.data("bootstrapValidator",null)},a.prototype.addNewCustomerBtn=function(){var t=this;if(this.form.bootstrapValidator("validate"),this.form.data("bootstrapValidator").isValid()){var e=this.form.serializeArray(),n={},o="addCustomer",a="添加成功！";this.customerIsEdit&&(o="updateCustomer",a="更新成功！",n.customerid=e[1].value);for(var r=0;r<e.length;r++){var s=e[r];n[s.name]=s.value}ajax(Api(o,n)).then(function(e){e?(i.default.myLayer(a,1),t.off.trigger("click"),t.getCustomerList_fn()):i.default.myLayer("操作失败！",5)})}},a.prototype.offNewCustomer=function(){this.customerIsEdit=!1,this.off.hide(),this.add.show(),this.table.show(),this.form.hide(),t(":input",this.form).val("")};var r=new a(t(".customer-form"),t(".customer-table"),t(".off-customer"),t(".add-customer"));r.showOrder(),r.getCustomerList_fn()})}).call(e,n(0))},4:function(t,e){}},[33]);