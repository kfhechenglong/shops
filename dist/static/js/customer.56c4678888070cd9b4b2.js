webpackJsonp([6],{2:function(t,n,e){"use strict";(function(t){e(4);var n=e(1),o=function(t){return t&&t.__esModule?t:{default:t}}(n);ajax("checksession","https://nx.smsc.net.cn/wxopen/app/shop/checksession.php/").then(function(t){console.log("登录成功状态！")}),t(document).ready(function(){function n(){console.log("退出");var t=function(){ajax("loginout","https://nx.smsc.net.cn/wxopen/app/shop/logout.php/").then(function(t){console.log("退出登录成功！",t)})};return o.default.myLayerTips("是否退出？",t,"取消","确定")}t("#loginout").on("click",n)})}).call(n,e(0))},3:function(t,n){},32:function(t,n,e){"use strict";(function(t){function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}();e(2);var i=e(1),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e(3),t(document).ready(function(){var e=t(".customer"),i=function(){function e(t,o,i,r){n(this,e),this.form=t,this.table=o,this.off=i,this.add=r,this.customerIsEdit=!1}return o(e,[{key:"showOrder",value:function(){t(".off-customer").trigger("click")}}]),e}();i.prototype.getCustomerList_fn=function(){var n=this,o=(layer.load(2),this);this.add.on("click",function(){o.addNewCustomer()}),t(".customer-btn-add").on("click",function(){o.addNewCustomerBtn()}),this.off.on("click",function(){o.offNewCustomer()}),ajax(Api("getCustomerList")).then(function(t){if(t.data){var i=t.data,r=i.length;n.customerList=i;var a="";if(r>0){a+="<thead>< tr > <th>客户姓名</th> <th>微信</th> <th>微信电话</th><th>联系方式</th><th>绑定电话</th><th>更新时间</th> <th>加入时间</th>  <th>二维码</th>  <th>操作</th> </tr > </thead ><tbody>";for(var s=0;s<r;s++){var d=i[s];a+="\n                        <tr>\n                            <td>"+d.name+"</td>\n                            <td>"+d.wxuid+"</td>\n                            <td>"+d.wxphone+"</td>\n                            <td>"+d.contact+"</td>\n                            <td>"+d.bind_phone+"</td>\n                            <td>"+d.uptime+"</td>\n                            <td>"+d.intime+'</td>\n                            <td> \n                                <button data-qrcode="'+d.qrcode+'" class="btn btn-info" id="customer-show-code-btn">二维码</button>\n                                <button data-id="'+d.id+'" class="btn btn-danger" id="customer-show-clear-btn">清除</button>\n                            </td>\n                            <td> \n                                <input type="hidden" value="'+d.id+'">\n                                <button class="btn btn-warning" id="customer-edit-btn">编辑</button>\n                            </td>\n                        </tr>\n                        '}a+="</tbody>"}else a="<p>暂无数据！</p>";n.table.empty(),n.table.append(a),e.on("click","#customer-delet-btn",function(){deletList("deletStore",o.getCustomerList_fn)}),e.on("click","#customer-edit-btn",function(){o.editCustomer(this)}),e.on("click","#customer-show-code-btn",function(){o.showCode(this)}),e.on("click","#customer-show-clear-btn",function(){o.clearCode(this)})}})},i.prototype.clearCode=function(n){ajax(Api("clearCode",{customerid:t(n).attr("data-id")})).then(function(t){r.default.myLayer("清除成功！",1)})},i.prototype.showCode=function(n){var e=t(n).attr("data-qrcode");t("#myModal-company").modal("show");var o='\n                <div class="modal-body">\n                    <div style="width:450px; height:450px;margin:0 auto;">\n                        <iframe id="wxcode" src="'+e+'" frameborder="0" scrolling="no"  width="100%" height="100%;"></iframe>\n                    </div>\n                    \n                </div>\n            ';t("#myModal-company-inner").empty(),t("#myModal-company-inner").append(o)},i.prototype.addNewCustomer=function(){this.add.hide(),this.off.show(),this.table.hide(),this.form.show()},i.prototype.editCustomer=function(n){this.customerIsEdit=!0,this.add.trigger("click");for(var e=t(n).parent().children("input").val(),o={},i=0;i<this.customerList.length;i++){var r=this.customerList[i];if(e==r.id){o=Object.assign({},r);break}}var a=this.form;a.find('input[name="id"]').val(e),a.find('input[name="name"]').val(o.name),a.find('input[name="contact"]').val(o.contact),a.find('input[name="bind_phone"]').val(o.bind_phone)},i.prototype.addNewCustomerBtn=function(){var t=this,n=this.form.serializeArray(),e={},o="addCustomer",i="添加成功！";this.customerIsEdit&&(o="updateCustomer",i="更新成功！",e.customerid=n.id);for(var a=0;a<n.length;a++){var s=n[a];e[s.name]=s.value}ajax(Api(o,e)).then(function(n){n?(r.default.myLayer(i,1),t.off.trigger("click"),t.getCustomerList_fn()):r.default.myLayer("操作失败！",5)})},i.prototype.offNewCustomer=function(){this.customerIsEdit=!1,this.off.hide(),this.add.show(),this.table.show(),this.form.hide(),t(":input",this.form).val("")};var a=new i(t(".customer-form"),t(".customer-table"),t(".off-customer"),t(".add-customer"));a.showOrder(),a.getCustomerList_fn()})}).call(n,e(0))}},[32]);